2:I[5878,["5501","static/chunks/c16f53c3-263c4e379e12b9c7.js","7096","static/chunks/7096-6d1c431b58ffd388.js","5878","static/chunks/5878-f84dc20828bf89ac.js","1711","static/chunks/app/(notes)/ds/skip-list/page-6fcf9d4e8f8a3f0e.js"],"Image"]
5:I[3474,["5501","static/chunks/c16f53c3-263c4e379e12b9c7.js","7096","static/chunks/7096-6d1c431b58ffd388.js","5878","static/chunks/5878-f84dc20828bf89ac.js","1711","static/chunks/app/(notes)/ds/skip-list/page-6fcf9d4e8f8a3f0e.js"],"default"]
9:I[4707,[],""]
a:I[6423,[],""]
b:I[2972,["2972","static/chunks/2972-46c398a3f3c253df.js","6942","static/chunks/app/(notes)/layout-5e3a5ea0592c52ee.js"],""]
3:T5b5,<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mrow><mn>1</mn><mo>−</mo><mi>p</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{1-p}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3262em;vertical-align:-0.4811em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">p</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>4:T865,<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mfrac><mn>1</mn><mi>p</mi></mfrac></msub><mi>n</mi></mrow><annotation encoding="application/x-tex">\log_{\frac{1}{p}} n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2787em;vertical-align:-0.5842em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.7538em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4829em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5842em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span></span></span></span>6:T648,<span class="keyword">method</span> <span class="function">find</span><span class="punctuation">(</span><span class="type">skiplist</span> <span class="soft-keyword">self</span><span class="punctuation">,</span> value<span class="punctuation">)</span><span class="punctuation">:</span>    
    current <span class="operator">=</span> <span class="soft-keyword">self</span><span class="punctuation">.</span>first
    height <span class="operator">=</span> length of current<span class="punctuation">.</span>next

    <span class="keyword">for</span> level <span class="operator">=</span> height<span class="punctuation">,</span> level <span class="operator">&gt;=</span> <span class="number">0</span><span class="punctuation">,</span> level<span class="operator">-</span><span class="operator">-</span><span class="punctuation">:</span>
        <span class="keyword">while</span> level <span class="operator">&lt;</span> length of current<span class="punctuation">.</span>next <span class="keyword">and</span> current<span class="punctuation">.</span>next<span class="punctuation">[</span>level<span class="punctuation">]</span><span class="punctuation">.</span>value <span class="operator">&lt;</span> value<span class="punctuation">:</span>
            current <span class="operator">=</span> current<span class="punctuation">.</span>next<span class="punctuation">[</span>level<span class="punctuation">]</span>
            
    <span class="keyword">return</span> current<span class="punctuation">.</span>next<span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span>7:T819,<span class="keyword">method</span> <span class="function">find_path</span><span class="punctuation">(</span><span class="type">skiplist</span> <span class="soft-keyword">self</span><span class="punctuation">,</span> value<span class="punctuation">)</span><span class="punctuation">:</span>    
    current <span class="operator">=</span> <span class="soft-keyword">self</span><span class="punctuation">.</span>first
    height <span class="operator">=</span> length of current<span class="punctuation">.</span>next
    <span class="abstract-type">array</span> path<span class="punctuation">[</span>height<span class="punctuation">]</span> <span class="operator">=</span> <span class="punctuation">[</span><span class="boolean">none</span><span class="punctuation">,</span> <span class="punctuation">.</span><span class="punctuation">.</span><span class="punctuation">.</span><span class="punctuation">,</span> <span class="boolean">none</span><span class="punctuation">]</span>

    <span class="keyword">for</span> level <span class="operator">=</span> height<span class="punctuation">,</span> level <span class="operator">&gt;=</span> <span class="number">0</span><span class="punctuation">,</span> level<span class="operator">-</span><span class="operator">-</span><span class="punctuation">:</span>
        <span class="keyword">while</span> level <span class="operator">&lt;</span> length of current<span class="punctuation">.</span>next <span class="keyword">and</span> current<span class="punctuation">.</span>next<span class="punctuation">[</span>level<span class="punctuation">]</span><span class="punctuation">.</span>value <span class="operator">&lt;</span> value<span class="punctuation">:</span>
            current <span class="operator">=</span> current<span class="punctuation">.</span>next<span class="punctuation">[</span>level<span class="punctuation">]</span>
        
        path<span class="punctuation">[</span>level<span class="punctuation">]</span> <span class="operator">=</span> current
            
    <span class="keyword">return</span> path8:Taa3,<span class="keyword">method</span> <span class="function">insert</span><span class="punctuation">(</span><span class="type">skiplist</span> <span class="soft-keyword">self</span><span class="punctuation">,</span> value<span class="punctuation">)</span><span class="punctuation">:</span>
    path <span class="operator">=</span> <span class="soft-keyword">self</span><span class="punctuation">.</span><span class="function">find_path</span><span class="punctuation">(</span>value<span class="punctuation">)</span>
    
    level <span class="operator">=</span> <span class="number">0</span>
    <span class="keyword">while</span> level <span class="operator">==</span> <span class="number">0</span> <span class="keyword">or</span> <span class="function">random</span><span class="punctuation">(</span><span class="boolean">true</span><span class="punctuation">,</span> <span class="boolean">false</span><span class="punctuation">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> level <span class="operator">&gt;=</span> length of <span class="soft-keyword">self</span><span class="punctuation">.</span>head<span class="punctuation">.</span>next<span class="punctuation">:</span>
            <span class="soft-keyword">self</span><span class="punctuation">.</span>head<span class="punctuation">.</span>next<span class="punctuation">.</span><span class="function">append</span><span class="punctuation">(</span><span class="boolean">none</span><span class="punctuation">)</span>
        
        <span class="keyword">if</span> level <span class="operator">&gt;=</span> length of path<span class="punctuation">:</span>
            path<span class="punctuation">.</span><span class="function">append</span><span class="punctuation">(</span><span class="soft-keyword">self</span><span class="punctuation">.</span>head<span class="punctuation">)</span>
            
        what<span class="punctuation">.</span>next<span class="punctuation">.</span><span class="function">append</span><span class="punctuation">(</span><span class="boolean">none</span><span class="punctuation">)</span>
        path<span class="punctuation">[</span>level<span class="punctuation">]</span><span class="punctuation">.</span>next<span class="punctuation">[</span>level<span class="punctuation">]</span><span class="punctuation">,</span> what<span class="punctuation">.</span>next<span class="punctuation">[</span>level<span class="punctuation">]</span> <span class="operator">=</span> what<span class="punctuation">,</span> path<span class="punctuation">[</span>level<span class="punctuation">]</span><span class="punctuation">.</span>next<span class="punctuation">[</span>level<span class="punctuation">]</span>0:["apL9GHZTvXe_rwdZHcL4n",[[["",{"children":["(notes)",{"children":["ds",{"children":["skip-list",{"children":["__PAGE__",{}]}]}]}]},"$undefined","$undefined",true],["",{"children":["(notes)",{"children":["ds",{"children":["skip-list",{"children":["__PAGE__",{},[["$L1",[["$","div",null,{"className":"title","children":["$","h1",null,{"children":"Список с пропусками"}]}],["$","div",null,{"className":"par","children":["$","p",null,{"children":"Список с пропусками (skip list) – вероятностная структура данных, построенная на основе связного списка. Позволяет за логарифмическое время добавлять, удалять и искать элементы."}]}],["$","div",null,{"className":"image","children":["$","$L2",null,{"src":"/_next/static/media/skip-list.9534325d.svg","width":644,"height":162,"alt":"$undefined"}]}],["$","div",null,{"className":"par","children":[["$","p",null,{"children":"Список с пропусками состоит из слоев. Нижний слой – обычный упорядоченный связный список. Каждый более высокий уровень действует как экспресс-полоса для списков ниже."}],["$","p",null,{"children":["Элемент появляется в слое выше с фиксированной вероятностью"," ",["$","span",null,{"className":"math","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>"}}],". В среднем каждый элемент появляется в"," ",["$","span",null,{"className":"math","dangerouslySetInnerHTML":{"__html":"$3"}}]," слоях, а общее количество слоев равно"," ",["$","span",null,{"className":"math","dangerouslySetInnerHTML":{"__html":"$4"}}],"."]}]]}],["$","div",null,{"className":"par","children":[["$","p",null,{"children":"Список с пропусками состоит из узлов. У каждого узла есть значение и массив ссылок на следующие узлы. Ссылки распределены по уровням."}],["$","p",null,{"children":["Первому, низшему уровню соответствует индекс ",["$","span",null,{"className":"math","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>"}}],". Длина массива у узла соответствует тому, на сколько элемент простирается вверх. Наибольшее количество ссылок у первого узла, оно же свидетельствует о максимальной высоте списка."]}]]}],["$","div",null,{"className":"codeblock","children":[["$","code",null,{"className":"language-pseudocode","dangerouslySetInnerHTML":{"__html":"<span class=\"keyword\">struct</span> <span class=\"class-name\">node</span><span class=\"punctuation\">:</span>\n    <span class=\"abstract-type\">array</span><span class=\"punctuation\">[</span><span class=\"class-name\">node</span><span class=\"operator\">*</span><span class=\"punctuation\">]</span> next\n    value"}}],["$","$L5",null,{"text":"struct node:\n    array[node*] next\n    value"}]]}],["$","div",null,{"className":"par","children":["$","p",null,{"children":["Все узлы списка с пропусками можно обернуть в один тип"," ",["$","span",null,{"className":"code","children":[["$","code",null,{"className":"language-pseudocode","dangerouslySetInnerHTML":{"__html":"<span class=\"type\">skiplist</span>"}}],false]}],", хранящий первый узел."]}]}],["$","div",null,{"className":"codeblock","children":[["$","code",null,{"className":"language-pseudocode","dangerouslySetInnerHTML":{"__html":"<span class=\"keyword\">type</span> <span class=\"type\">skiplist</span><span class=\"punctuation\">:</span>\n    <span class=\"class-name\">node</span> head\n    \n    <span class=\"keyword\">constructor</span><span class=\"punctuation\">(</span><span class=\"soft-keyword\">self</span><span class=\"punctuation\">)</span><span class=\"punctuation\">:</span>\n        <span class=\"soft-keyword\">self</span><span class=\"punctuation\">.</span>head <span class=\"operator\">=</span> <span class=\"boolean\">none</span>"}}],["$","$L5",null,{"text":"type skiplist:\n    node head\n    \n    constructor(self):\n        self.head = none"}]]}],["$","section",null,{"children":[["$","h2",null,{"children":"Поиск"}],["$","div",null,{"className":"par","children":["$","p",null,{"children":["Нужно найти первый элемент, значение которого не меньше данного"," ",["$","span",null,{"className":"code","children":[["$","code",null,{"className":"language-pseudocode","dangerouslySetInnerHTML":{"__html":"value"}}],false]}],"."]}]}],["$","div",null,{"className":"par","children":[["$","p",null,{"children":["$","span",null,{"className":"decl","children":"Алгоритм поиска элемента."}]}],["$","ol",null,{"className":"tight","children":[["$","li",null,{"children":["$","p",null,{"children":"Начинаем поиск с первого элемента верхнего уровня."}]}],["$","li",null,{"children":["$","p",null,{"children":"Переходим к следующему элементу, пока значение следующего элемента меньше искомого."}]}],["$","li",null,{"children":["$","p",null,{"children":["Переместимся на уровень ниже и перейдем к шагу ",["$","span",null,{"className":"math","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span>"}}],"."]}]}]]}]]}],["$","div",null,{"className":"codeblock","children":[["$","code",null,{"className":"language-pseudocode","dangerouslySetInnerHTML":{"__html":"$6"}}],["$","$L5",null,{"text":"method find(skiplist self, value):    \n    current = self.first\n    height = length of current.next\n\n    for level = height, level >= 0, level--:\n        while level < length of current.next and current.next[level].value < value:\n            current = current.next[level]\n            \n    return current.next[0]"}]]}],["$","div",null,{"className":"par","children":["$","p",null,{"children":["Во время поиска мы на каждом уровне нашли узел, который не превосходит ",["$","span",null,{"className":"code","children":[["$","code",null,{"className":"language-pseudocode","dangerouslySetInnerHTML":{"__html":"value"}}],false]}],". Эту информацию можно запомнить и использовать в дальнейшем."]}]}],["$","div",null,{"className":"codeblock","children":[["$","code",null,{"className":"language-pseudocode","dangerouslySetInnerHTML":{"__html":"$7"}}],["$","$L5",null,{"text":"method find_path(skiplist self, value):    \n    current = self.first\n    height = length of current.next\n    array path[height] = [none, ..., none]\n\n    for level = height, level >= 0, level--:\n        while level < length of current.next and current.next[level].value < value:\n            current = current.next[level]\n        \n        path[level] = current\n            \n    return path"}]]}],["$","h2",null,{"children":"Вставка"}],["$","div",null,{"className":"par","children":["$","p",null,{"children":["Для вставки элемента в список с пропусками нужно вставить его в нужное место в нижнем списке, а затем с вероятностью ",["$","span",null,{"className":"math","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>"}}]," ","проталкивать вверх, создавая новые связи. Каждый слой должен оставаться упорядоченным, поэтому сначала нужно найти место вставки."]}]}],["$","div",null,{"className":"par","children":[["$","p",null,{"children":["$","span",null,{"className":"decl","children":"Алгоритм вставки элемента."}]}],["$","ol",null,{"className":"tight","children":[["$","li",null,{"children":["$","p",null,{"children":"На каждом уровне найти элемент, который не превосходит вставляемое значение."}]}],["$","li",null,{"children":["$","p",null,{"children":"Вставить элемент на последний уровень на найденную позицию."}]}],["$","li",null,{"children":["$","p",null,{"children":["Пока роляет вероятность ",["$","span",null,{"className":"math","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>"}}]," проталкивать элемент вверх, создавая новые ссылки."]}]}]]}]]}],["$","div",null,{"className":"image","children":["$","$L2",null,{"src":"/_next/static/media/skip-list-insert.6c5a286b.svg","width":696,"height":162,"alt":"$undefined"}]}],["$","div",null,{"className":"codeblock","children":[["$","code",null,{"className":"language-pseudocode","dangerouslySetInnerHTML":{"__html":"$8"}}],["$","$L5",null,{"text":"method insert(skiplist self, value):\n    path = self.find_path(value)\n    \n    level = 0\n    while level == 0 or random(true, false):\n        if level >= length of self.head.next:\n            self.head.next.append(none)\n        \n        if level >= length of path:\n            path.append(self.head)\n            \n        what.next.append(none)\n        path[level].next[level], what.next[level] = what, path[level].next[level]"}]]}]]}]],[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/c7d54b6fa11d1a10.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/26add30ef067d5ef.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/fe2eed3e70b09d81.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","3",{"rel":"stylesheet","href":"/_next/static/css/cb1458b54209591a.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","4",{"rel":"stylesheet","href":"/_next/static/css/a85cc6ffb2e23bf0.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","5",{"rel":"stylesheet","href":"/_next/static/css/e1fa1c63977e8d7a.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","6",{"rel":"stylesheet","href":"/_next/static/css/224c6de4cde30e73.css","precedence":"next","crossOrigin":"$undefined"}]]],null],null]},[null,["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children","(notes)","children","ds","children","skip-list","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[null,["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children","(notes)","children","ds","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/07ddf3913eec176a.css","precedence":"next","crossOrigin":"$undefined"}]],[["$","article",null,{"children":["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children","(notes)","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]}],["$","div",null,{"style":{"height":"5rem"}}]]],null],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/0ae8bd05a52ca320.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"ru","children":["$","body",null,{"className":"__variable_8aafdc __variable_42bd1a","children":[["$","header",null,{"children":[["$","img",null,{"src":"/icon.svg","alt":"","role":"presentation"}],["$","nav",null,{"children":[["$","$Lb",null,{"className":"colorless","href":"/","children":"Главная"}],["$","$Lb",null,{"className":"colorless","href":"/tasks","children":"Задачи"}]]}]]}],["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"className":"error404","children":[["$","h1",null,{"children":[["$","span",null,{"children":"4"}],["$","span",null,{"children":"0"}],["$","span",null,{"children":"4"}]]}],"Без паники! Вы просто попали на несуществующую страницу."]}],"notFoundStyles":[]}]]}]}]],null],null],["$Lc",null]]]]
c:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Список с пропусками"}],["$","meta","3",{"name":"description","content":"..."}],["$","link","4",{"rel":"icon","href":"/icon.svg?3bdfcaa020873225","type":"image/svg+xml","sizes":"any"}]]
1:null
